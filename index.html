<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>AKARAT TUNISIA | LÃ¼ks Gayrimenkul</title>
    <!-- Firebase SDK (v8 compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-storage-compat.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif; }
        body { background: #f4f7fc; color: #1e293b; }
        /* Navbar */
        .navbar { background: #0a1a2b; color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .logo { font-size: 1.8rem; font-weight: 700; letter-spacing: 2px; color: #eab308; }
        .nav-links { display: flex; gap: 30px; align-items: center; flex-wrap: wrap; }
        .nav-links a { color: white; text-decoration: none; font-weight: 500; }
        .auth-buttons { display: flex; gap: 10px; }
        .auth-buttons button { background: transparent; border: 1px solid #eab308; color: #eab308; padding: 8px 20px; border-radius: 30px; cursor: pointer; font-weight: 600; transition: 0.3s; }
        .auth-buttons button:hover { background: #eab308; color: #0a1a2b; }
        #logoutBtn { background: #ef4444; border-color: #ef4444; color: white; }
        #logoutBtn:hover { background: #dc2626; }
        .hero { background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?auto=format&fit=crop&w=2000&q=80') center/cover; height: 400px; display: flex; align-items: center; justify-content: center; text-align: center; color: white; }
        .hero h1 { font-size: 4rem; margin-bottom: 10px; }
        .hero p { font-size: 1.3rem; letter-spacing: 2px; }
        .stats { display: flex; justify-content: center; gap: 50px; padding: 40px 20px; background: white; flex-wrap: wrap; }
        .stat-item { text-align: center; }
        .stat-number { font-size: 3rem; font-weight: 800; color: #0a1a2b; }
        .stat-label { color: #5f6b7a; text-transform: uppercase; }
        .container { max-width: 1300px; margin: 0 auto; padding: 30px 20px; }
        .section-title { font-size: 2.2rem; margin: 40px 0 20px; color: #0a1a2b; border-left: 6px solid #eab308; padding-left: 15px; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin: 30px 0; }
        .card { background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.1); transition: 0.3s; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 20px 35px rgba(0,0,0,0.15); }
        .card img { width: 100%; height: 220px; object-fit: cover; }
        .card-content { padding: 20px; }
        .card h3 { font-size: 1.5rem; margin-bottom: 8px; }
        .location { color: #eab308; font-weight: 600; margin-bottom: 8px; }
        .details { color: #5f6b7a; margin: 10px 0; }
        .price { font-size: 1.8rem; font-weight: 700; color: #0a1a2b; border-top: 1px solid #ddd; padding-top: 15px; margin-top: 10px; }
        .btn-add { background: #0a1a2b; color: white; border: none; padding: 15px 50px; font-size: 1.2rem; font-weight: 600; border-radius: 50px; cursor: pointer; margin: 30px auto; display: block; transition: 0.3s; }
        .btn-add:hover { background: #eab308; }
        .contact { background: #e5e9f0; padding: 60px 20px; margin-top: 50px; }
        .contact-container { max-width: 1200px; margin: 0 auto; display: flex; gap: 50px; flex-wrap: wrap; }
        .contact-info h3 { font-size: 2rem; margin-bottom: 20px; }
        .contact-detail p { margin: 10px 0; font-size: 1.1rem; }
        /* Modal (aÃ§Ä±lÄ±r pencere) stilleri - kaydÄ±rÄ±labilir yapÄ±ldÄ± */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 30px; max-width: 500px; width: 95%; max-height: 90vh; overflow-y: auto; border-radius: 24px; box-shadow: 0 30px 60px rgba(0,0,0,0.4); position: relative; }
        .close-modal { position: sticky; top: 0; float: right; font-size: 2rem; cursor: pointer; color: #aaa; }
        .close-modal:hover { color: black; }
        .modal h2 { margin-bottom: 25px; color: #0a1a2b; }
        .modal-form input, .modal-form select, .modal-form textarea { width: 100%; padding: 14px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 12px; font-size: 1rem; }
        .modal-form button { background: #0a1a2b; color: white; padding: 16px; width: 100%; border: none; border-radius: 40px; font-size: 1.1rem; font-weight: 600; cursor: pointer; }
        .modal-form button:hover { background: #eab308; }
        .modal-footer { text-align: center; margin-top: 15px; }
        .modal-footer a { color: #eab308; cursor: pointer; font-weight: 600; }
        footer { background: #0a1a2b; color: white; text-align: center; padding: 30px; margin-top: 50px; }
        @media (max-width: 600px) {
            .hero h1 { font-size: 2.5rem; }
            .stats { gap: 20px; }
            .stat-number { font-size: 2.2rem; }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <div class="navbar">
        <div class="logo">AKARAT</div>
        <div class="nav-links">
            <a href="#">ANA SAYFA</a>
            <a href="#">Ä°LANLAR</a>
            <a href="#">Ä°LETÄ°ÅÄ°M</a>
            <div class="auth-buttons" id="authButtons"></div>
        </div>
    </div>

    <!-- Hero -->
    <div class="hero">
        <div>
            <h1>AKARAT TUNISIA</h1>
            <p>TUNUS'UN EN SEÃ‡KÄ°N GAYRÄ°MENKULLERÄ°</p>
        </div>
    </div>

    <!-- Ä°statistikler -->
    <div class="stats">
        <div class="stat-item"><div class="stat-number">24</div><div class="stat-label">SEÃ‡KÄ°N BÃ–LGE</div></div>
        <div class="stat-item"><div class="stat-number" id="userCount">1200+</div><div class="stat-label">MUTLU SAHÄ°P</div></div>
        <div class="stat-item"><div class="stat-number" id="listingCount">3</div><div class="stat-label">AKTÄ°F Ä°LAN</div></div>
    </div>

    <!-- Ä°lanlar AlanÄ± -->
    <div class="container">
        <div class="section-title">Ã–ne Ã‡Ä±kan Ä°lanlar</div>
        <div class="card-grid" id="featuredListings"></div>

        <div class="section-title">SatÄ±lÄ±k Gayrimenkuller</div>
        <div class="card-grid" id="allListings"></div>

        <!-- Ä°lan ekle butonu, sadece giriÅŸ yapÄ±nca gÃ¶rÃ¼nÃ¼r -->
        <div id="addListingContainer" style="text-align: center; display: none;">
            <button class="btn-add" id="addListingBtn">+ YENÄ° Ä°LAN EKLE</button>
        </div>
    </div>

    <!-- Ä°letiÅŸim -->
    <div class="contact">
        <div class="contact-container">
            <div class="contact-info">
                <h3>Bize UlaÅŸÄ±n</h3>
                <p>Tunus'un en Ã¶zel gayrimenkulleri iÃ§in bizimle iletiÅŸime geÃ§in.</p>
                <div class="contact-detail">
                    <p>ğŸ“ +216 71 234 56 78</p>
                    <p>âœ‰ï¸ info@akarat.tn</p>
                    <p>ğŸ“ Kartaca, Tunus</p>
                </div>
            </div>
            <div style="flex:1; min-width:250px;">
                <input type="text" placeholder="AdÄ±nÄ±z" id="contactName" style="width:100%; padding:12px; margin-bottom:15px; border-radius:12px; border:1px solid #ccc;">
                <input type="email" placeholder="E-posta" id="contactEmail" style="width:100%; padding:12px; margin-bottom:15px; border-radius:12px; border:1px solid #ccc;">
                <textarea placeholder="MesajÄ±nÄ±z" id="contactMessage" rows="4" style="width:100%; padding:12px; border-radius:12px; border:1px solid #ccc;"></textarea>
                <button class="btn-add" id="contactBtn" style="margin-top:15px; padding:12px 30px;">GÃ–NDER</button>
            </div>
        </div>
    </div>

    <footer>
        <p>Â© 2025 AKARAT TUNISIA - TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
    </footer>

    <!-- MODALLAR (AÃ§Ä±lÄ±r Pencereler) -->
    <!-- Ãœye Ol Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeSignup">&times;</span>
            <h2>Ãœye Ol</h2>
            <form class="modal-form" id="signupForm">
                <input type="text" id="signupName" placeholder="Ad Soyad" required>
                <input type="email" id="signupEmail" placeholder="E-posta" required>
                <input type="password" id="signupPassword" placeholder="Åifre" required>
                <button type="submit">KAYIT OL</button>
            </form>
            <div class="modal-footer">Zaten Ã¼ye misiniz? <a id="goToLogin">GiriÅŸ Yap</a></div>
        </div>
    </div>
    <!-- GiriÅŸ Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeLogin">&times;</span>
            <h2>GiriÅŸ Yap</h2>
            <form class="modal-form" id="loginForm">
                <input type="email" id="loginEmail" placeholder="E-posta" required>
                <input type="password" id="loginPassword" placeholder="Åifre" required>
                <button type="submit">GÄ°RÄ°Å</button>
            </form>
            <div class="modal-footer">HesabÄ±nÄ±z yok mu? <a id="goToSignup">Ãœye Ol</a></div>
        </div>
    </div>
    <!-- Ä°lan Ekle Modal (KAYDIRILABÄ°LÄ°R) -->
    <div id="addListingModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeAddListing">&times;</span>
            <h2>Ä°lan Ekle</h2>
            <form class="modal-form" id="addListingForm">
                <input type="text" id="listingTitle" placeholder="Ä°lan BaÅŸlÄ±ÄŸÄ±" required>
                <select id="listingCategory" required>
                    <option value="">Kategori SeÃ§in</option>
                    <option value="Villa">SatÄ±lÄ±k Villa</option>
                    <option value="Daire">SatÄ±lÄ±k Daire</option>
                    <option value="Mustakil">SatÄ±lÄ±k MÃ¼stakil</option>
                </select>
                <input type="text" id="listingLocation" placeholder="Konum (ÅŸehir, mahalle)" required>
                <input type="number" id="listingPrice" placeholder="Fiyat (â‚¬)" required>
                <input type="number" id="listingArea" placeholder="Alan (mÂ²)" required>
                <input type="text" id="listingRooms" placeholder="Oda SayÄ±sÄ± (Ã¶rn: 3+1)" required>
                <textarea id="listingDescription" placeholder="Ä°lan AÃ§Ä±klamasÄ±" rows="3" required></textarea>
                <input type="file" id="listingPhotos" accept="image/*" multiple>
                <small>En az bir fotoÄŸraf seÃ§in</small>
                <button type="submit">Ä°LANI YAYINLA</button>
            </form>
        </div>
    </div>

    <!-- FIREBASE YAPILANDIRMASI (SÄ°ZÄ°N BÄ°LGÄ°LERÄ°NÄ°ZLE) -->
    <script>
        // KENDÄ° FIREBASE BÄ°LGÄ°LERÄ°NÄ°Z (son verdiÄŸiniz)
        const firebaseConfig = {
            apiKey: "AIzaSyBHQCM9-JYn6q9H9enKOMlNG7Q8u4oDD9g",
            authDomain: "akarat-tunisia-a8b7b.firebaseapp.com",
            projectId: "akarat-tunisia-a8b7b",
            storageBucket: "akarat-tunisia-a8b7b.firebasestorage.app",
            messagingSenderId: "975091144074",
            appId: "1:975091144074:web:3d8ed3d09f6feefebca473"
        };
        // Firebase'i baÅŸlat
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();
    </script>

    <!-- UYGULAMA JAVASCRÄ°PTÄ° -->
    <script>
        (function() {
            // DOM elementleri
            const authDiv = document.getElementById('authButtons');
            const signupModal = document.getElementById('signupModal');
            const loginModal = document.getElementById('loginModal');
            const addModal = document.getElementById('addListingModal');
            const addContainer = document.getElementById('addListingContainer');
            const addBtn = document.getElementById('addListingBtn');
            
            const closeSignup = document.getElementById('closeSignup');
            const closeLogin = document.getElementById('closeLogin');
            const closeAdd = document.getElementById('closeAddListing');
            const goToLogin = document.getElementById('goToLogin');
            const goToSignup = document.getElementById('goToSignup');

            function openModal(m) { m.style.display = 'flex'; }
            function closeModal(m) { m.style.display = 'none'; }

            window.onclick = (e) => {
                if (e.target === signupModal) closeModal(signupModal);
                if (e.target === loginModal) closeModal(loginModal);
                if (e.target === addModal) closeModal(addModal);
            };
            closeSignup.onclick = () => closeModal(signupModal);
            closeLogin.onclick = () => closeModal(loginModal);
            closeAdd.onclick = () => closeModal(addModal);
            goToLogin.onclick = (e) => { e.preventDefault(); closeModal(signupModal); openModal(loginModal); };
            goToSignup.onclick = (e) => { e.preventDefault(); closeModal(loginModal); openModal(signupModal); };

            // Auth durumu izle
            auth.onAuthStateChanged(user => {
                if (user) {
                    authDiv.innerHTML = `<span style="color:white; margin-right:10px;">Merhaba, ${user.email}</span><button id="logoutBtn">Ã‡IKIÅ</button>`;
                    document.getElementById('logoutBtn').addEventListener('click', () => auth.signOut());
                    addContainer.style.display = 'block';
                } else {
                    authDiv.innerHTML = `<button id="loginBtn">GÄ°RÄ°Å</button><button id="signupBtn">ÃœYE OL</button>`;
                    document.getElementById('loginBtn').onclick = () => openModal(loginModal);
                    document.getElementById('signupBtn').onclick = () => openModal(signupModal);
                    addContainer.style.display = 'none';
                }
            });

            // Ãœye ol formu
            document.getElementById('signupForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('signupEmail').value;
                const pass = document.getElementById('signupPassword').value;
                auth.createUserWithEmailAndPassword(email, pass)
                    .then(() => { alert('Ãœyelik oluÅŸturuldu!'); closeModal(signupModal); })
                    .catch(err => alert('Hata: ' + err.message));
            });

            // GiriÅŸ formu
            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const pass = document.getElementById('loginPassword').value;
                auth.signInWithEmailAndPassword(email, pass)
                    .then(() => { alert('GiriÅŸ baÅŸarÄ±lÄ±!'); closeModal(loginModal); })
                    .catch(err => alert('Hata: ' + err.message));
            });

            // Ä°lan ekle butonu
            addBtn.addEventListener('click', () => openModal(addModal));

            // Ä°lan ekle formu
            document.getElementById('addListingForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const user = auth.currentUser;
                if (!user) { alert('GiriÅŸ yapÄ±n!'); closeModal(addModal); return; }

                const title = document.getElementById('listingTitle').value;
                const category = document.getElementById('listingCategory').value;
                const location = document.getElementById('listingLocation').value;
                const price = parseFloat(document.getElementById('listingPrice').value);
                const area = parseInt(document.getElementById('listingArea').value);
                const rooms = document.getElementById('listingRooms').value;
                const desc = document.getElementById('listingDescription').value;
                const files = document.getElementById('listingPhotos').files;
                if (files.length === 0) { alert('En az bir fotoÄŸraf seÃ§in'); return; }

                const urls = [];
                for (let f of files) {
                    const ref = storage.ref(`listings/${user.uid}/${Date.now()}_${f.name}`);
                    await ref.put(f);
                    urls.push(await ref.getDownloadURL());
                }

                await db.collection('listings').add({
                    title, category, location, price, area, rooms, desc,
                    photoURLs: urls, userId: user.uid, userEmail: user.email,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                alert('Ä°lan eklendi!');
                closeModal(addModal);
                loadListings();
            });

            // Ä°lanlarÄ± listele
            async function loadListings() {
                const snap = await db.collection('listings').orderBy('createdAt', 'desc').get();
                const listings = snap.docs.map(d => ({ id: d.id, ...d.data() }));
                document.getElementById('listingCount').innerText = listings.length;

                const featured = document.getElementById('featuredListings');
                const all = document.getElementById('allListings');
                if (listings.length === 0) {
                    featured.innerHTML = '<p>HenÃ¼z ilan yok.</p>'; all.innerHTML = ''; return;
                }
                const card = (l) => `
                    <div class="card">
                        <img src="${l.photoURLs?.[0] || 'https://via.placeholder.com/400x250'}" alt="${l.title}">
                        <div class="card-content">
                            <h3>${l.title}</h3>
                            <div class="location">${l.location}</div>
                            <div class="details">${l.area} mÂ² | ${l.rooms}</div>
                            <div class="price">${l.price.toLocaleString('tr')} â‚¬</div>
                        </div>
                    </div>`;
                all.innerHTML = listings.map(card).join('');
                featured.innerHTML = listings.slice(0, 3).map(card).join('');
            }
            loadListings();

            // Ä°letiÅŸim butonu
            document.getElementById('contactBtn').onclick = () => alert('Mesaj gÃ¶nderildi (simÃ¼lasyon).');
        })();
    </script>
</body>
</html>
